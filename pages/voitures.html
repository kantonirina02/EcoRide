<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mes Voitures - EcoRide</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link href="../scss/main.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-success">
        <div class="container">
            <a class="navbar-brand" href="home.html">
                <i class="bi bi-tree me-2"></i>EcoRide
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="trajet_search.html">
                            <i class="bi bi-search me-1"></i>Rechercher
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="trajet_new.html">
                            <i class="bi bi-plus-circle me-1"></i>Proposer
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="covoiturages.html">
                            <i class="bi bi-list me-1"></i>Mes Trajets
                        </a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown">
                            <i class="bi bi-person-circle me-1"></i>Mon Compte
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="profil.html">
                                <i class="bi bi-person me-2"></i>Mon Profil
                            </a></li>
                            <li><a class="dropdown-item active" href="voitures.html">
                                <i class="bi bi-car-front me-2"></i>Mes Voitures
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="signin.html">
                                <i class="bi bi-box-arrow-right me-2"></i>Déconnexion
                            </a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="bg-light py-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <div>
                            <h1 class="mb-2">
                                <i class="bi bi-car-front text-success me-2"></i>
                                Mes Voitures
                            </h1>
                            <p class="text-muted">
                                Gérez vos véhicules pour proposer des covoiturages
                            </p>
                        </div>
                        <button class="btn btn-success btn-lg" data-bs-toggle="modal" data-bs-target="#addCarModal">
                            <i class="bi bi-plus-circle me-2"></i>Ajouter une voiture
                        </button>
                    </div>

                    <!-- Statistiques -->
                    <div class="row g-4 mb-5" id="statsContainer">
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <i class="bi bi-car-front display-4 text-success mb-3"></i>
                                    <h3 class="text-success" id="totalCars">0</h3>
                                    <p class="text-muted mb-0">Voitures</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <i class="bi bi-people display-4 text-info mb-3"></i>
                                    <h3 class="text-info" id="totalSeats">0</h3>
                                    <p class="text-muted mb-0">Places totales</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <i class="bi bi-currency-euro display-4 text-warning mb-3"></i>
                                    <h3 class="text-warning" id="avgPrice">0€</h3>
                                    <p class="text-muted mb-0">Prix moyen</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <i class="bi bi-star display-4 text-warning mb-3"></i>
                                    <h3 class="text-warning" id="avgRating">5.0</h3>
                                    <p class="text-muted mb-0">Note moyenne</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Liste des voitures -->
                    <div id="carsContainer">
                        <!-- Les voitures seront affichées ici -->
                    </div>

                    <!-- Message quand aucune voiture -->
                    <div class="text-center d-none" id="noCarsMessage">
                        <i class="bi bi-car-front text-muted" style="font-size: 4rem;"></i>
                        <h3 class="text-muted mt-3">Aucune voiture enregistrée</h3>
                        <p class="text-muted mb-4">Ajoutez votre première voiture pour commencer à proposer des covoiturages</p>
                        <button class="btn btn-success btn-lg" data-bs-toggle="modal" data-bs-target="#addCarModal">
                            <i class="bi bi-plus-circle me-2"></i>Ajouter ma première voiture
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal d'ajout/modification de voiture -->
    <div class="modal fade" id="addCarModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalTitle">
                        <i class="bi bi-plus-circle me-2"></i>Ajouter une voiture
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <form id="carForm">
                    <div class="modal-body">
                        <input type="hidden" id="carId" name="carId">

                        <div class="row g-3">
                            <!-- Marque -->
                            <div class="col-md-6">
                                <label for="marque" class="form-label">Marque *</label>
                                <select class="form-select" id="marque" name="marque" required>
                                    <option value="">Choisir une marque</option>
                                    <option value="Renault">Renault</option>
                                    <option value="Peugeot">Peugeot</option>
                                    <option value="Citroën">Citroën</option>
                                    <option value="Volkswagen">Volkswagen</option>
                                    <option value="Toyota">Toyota</option>
                                    <option value="Ford">Ford</option>
                                    <option value="BMW">BMW</option>
                                    <option value="Audi">Audi</option>
                                    <option value="Mercedes">Mercedes</option>
                                    <option value="Autre">Autre</option>
                                </select>
                            </div>

                            <!-- Modèle -->
                            <div class="col-md-6">
                                <label for="modele" class="form-label">Modèle *</label>
                                <input type="text" class="form-control" id="modele" name="modele" required>
                            </div>

                            <!-- Année -->
                            <div class="col-md-4">
                                <label for="annee" class="form-label">Année *</label>
                                <select class="form-select" id="annee" name="annee" required>
                                    <option value="">Choisir une année</option>
                                    <!-- Généré dynamiquement -->
                                </select>
                            </div>

                            <!-- Couleur -->
                            <div class="col-md-4">
                                <label for="couleur" class="form-label">Couleur *</label>
                                <select class="form-select" id="couleur" name="couleur" required>
                                    <option value="">Choisir une couleur</option>
                                    <option value="Blanc">Blanc</option>
                                    <option value="Noir">Noir</option>
                                    <option value="Gris">Gris</option>
                                    <option value="Bleu">Bleu</option>
                                    <option value="Rouge">Rouge</option>
                                    <option value="Vert">Vert</option>
                                    <option value="Jaune">Jaune</option>
                                    <option value="Orange">Orange</option>
                                    <option value="Violet">Violet</option>
                                    <option value="Autre">Autre</option>
                                </select>
                            </div>

                            <!-- Nombre de places -->
                            <div class="col-md-4">
                                <label for="places" class="form-label">Nombre de places *</label>
                                <select class="form-select" id="places" name="places" required>
                                    <option value="">Choisir</option>
                                    <option value="2">2 places</option>
                                    <option value="3">3 places</option>
                                    <option value="4">4 places</option>
                                    <option value="5">5 places</option>
                                    <option value="6">6 places</option>
                                    <option value="7">7 places</option>
                                    <option value="8">8 places</option>
                                    <option value="9">9 places</option>
                                </select>
                            </div>

                            <!-- Énergie -->
                            <div class="col-md-6">
                                <label for="energie" class="form-label">Type d'énergie *</label>
                                <select class="form-select" id="energie" name="energie" required>
                                    <option value="">Choisir</option>
                                    <option value="Essence">Essence</option>
                                    <option value="Diesel">Diesel</option>
                                    <option value="Électrique">Électrique</option>
                                    <option value="Hybride">Hybride</option>
                                    <option value="GPL">GPL</option>
                                </select>
                            </div>

                            <!-- Climatisation -->
                            <div class="col-md-6">
                                <label for="climatisation" class="form-label">Climatisation</label>
                                <select class="form-select" id="climatisation" name="climatisation">
                                    <option value="">Non spécifié</option>
                                    <option value="Oui">Oui</option>
                                    <option value="Non">Non</option>
                                </select>
                            </div>

                            <!-- Immatriculation -->
                            <div class="col-12">
                                <label for="immatriculation" class="form-label">Immatriculation *</label>
                                <input type="text" class="form-control" id="immatriculation" name="immatriculation"
                                       placeholder="AA-123-BB" required>
                                <div class="form-text">
                                    Format: AA-123-BB (sans espaces)
                                </div>
                            </div>

                            <!-- Description -->
                            <div class="col-12">
                                <label for="description" class="form-label">Description (optionnel)</label>
                                <textarea class="form-control" id="description" name="description" rows="3"
                                          placeholder="Décrivez votre véhicule, ses équipements, son état..."></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                            <i class="bi bi-x-lg me-1"></i>Annuler
                        </button>
                        <button type="submit" class="btn btn-success">
                            <i class="bi bi-check-lg me-1"></i>Enregistrer
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal de confirmation de suppression -->
    <div class="modal fade" id="deleteCarModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-danger">
                        <i class="bi bi-exclamation-triangle me-2"></i>Confirmer la suppression
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p>Êtes-vous sûr de vouloir supprimer cette voiture ?</p>
                    <p class="text-muted small">
                        Cette action est irréversible. Tous les covoiturages associés à cette voiture seront également supprimés.
                    </p>
                    <div id="carToDeleteInfo"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteBtn">
                        <i class="bi bi-trash me-1"></i>Supprimer
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-light py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5><i class="bi bi-tree me-2"></i>EcoRide</h5>
                    <p>Voyagez écologique et économique</p>
                </div>
                <div class="col-md-3">
                    <h6>Liens utiles</h6>
                    <ul class="list-unstyled">
                        <li><a href="mentionsLegales.html" class="text-light">Mentions légales</a></li>
                        <li><a href="#" class="text-light">Conditions d'utilisation</a></li>
                        <li><a href="#" class="text-light">Politique de confidentialité</a></li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h6>Contact</h6>
                    <p>
                        <i class="bi bi-envelope me-2"></i>contact@ecoride.fr<br>
                        <i class="bi bi-telephone me-2"></i>+33 1 23 45 67 89
                    </p>
                </div>
            </div>
            <hr class="my-3">
            <div class="text-center">
                <small>&copy; 2024 EcoRide. Tous droits réservés.</small>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/voitures.js"></script>
</body>
</html>
